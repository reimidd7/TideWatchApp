<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TideWatch - Maple Grove Beach</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark/light mode">
        üåô
    </button>
    <!-- Manual Refresh Button -->
    <button class="refresh-button" id="refresh-button" aria-label="Refresh all data">
        üîÑ
    </button>

    <!-- Main Container -->
    <div id="app" class="container">
        
        <!-- Left Side Panel -->
        <aside class="side-panel">
            <h2 class="location-title" id="location-name">Maple Grove Beach</h2>
            
            <div class="current-height">
                <div class="label">Current Height</div>
                <div class="value" id="current-height">7.8 ft</div>
            </div>
            
            <div class="tide-times">
                <div class="tide-time">
                    <div class="label">Next Low </div>
                    <div class="value" id="next-low">7:34 PM</div>
                </div>
                <div class="tide-time">
                    <div class="label">Next High </div>
                    <div class="value" id="next-high">9:08 AM</div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            
            <!-- Top Section - Tide Dial + Weather/Astro -->
            <div class="top-section">
                <!-- Tide Dial - Left Side -->
                <div class="tide-dial-section">
                    <div class="info-card tide-dial-card">
                        <div class="tide-dial-container">
                            
                            <!-- TOP: HIGH label and time -->
                            <div class="tide-label-high">
                                <div class="tide-extreme-label">HIGH</div>
                                <div class="tide-extreme-time" id="high-time-display">--:--</div>
                            </div>
                            
                            <svg class="tide-dial" viewBox="0 0 240 240">
                                <defs>
                                    <!-- Gradient for falling tide (red at top to blue at bottom) - RIGHT side -->
                                    <linearGradient id="tideGradientFalling" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" stop-color="#D95E5E" />
                                        <stop offset="100%" stop-color="#33C7FF" />
                                    </linearGradient>
                                    
                                    <!-- Gradient for rising tide (blue at bottom to red at top) - LEFT side -->
                                    <linearGradient id="tideGradientRising" x1="0%" y1="100%" x2="0%" y2="0%">
                                        <stop offset="0%" stop-color="#33C7FF" />
                                        <stop offset="100%" stop-color="#D95E5E" />
                                    </linearGradient>
                                </defs>
                                
                                <!-- Background gray ring - THIS IS THE TRACK -->
                                <circle cx="120" cy="120" r="80" fill="none" class="tide-ring-bg" stroke-width="14"/>
                                
                                <!-- High tide marker (top) -->
                                <line x1="120" y1="33" x2="120" y2="47" stroke="#D95E5E" stroke-width="3" stroke-linecap="butt"/>

                                <!-- Low tide marker (bottom) -->
                                <line x1="120" y1="193" x2="120" y2="207" stroke="#33C7FF" stroke-width="3" stroke-linecap="butt"/>
                                
                                <!-- Tide level arc - drawn via JS -->
                                <path id="tide-arc" d="" fill="none" stroke-width="14" stroke-linecap="butt"/>
                                
                                <!-- Inner circle -->
                                <circle cx="120" cy="120" r="72" class="tide-inner-circle" stroke-width="1"/>
                                
                                <!-- Rising label (left) -->
                                <text x="18" y="123" text-anchor="middle" font-size="8" class="tide-side-label">rising</text>
                                
                                <!-- Falling label (right) -->
                                <text x="224" y="123" text-anchor="middle" font-size="8" class="tide-side-label falling">falling</text>
                            </svg>
                            
                            <!-- Swipeable Center Display -->
                            <div class="tide-center-swipe-container" id="dial-swipe-container">
                                <div class="dial-swipe-wrapper" id="dial-swipe-wrapper">
                                    
                                    <!-- View 1: Next Tide with Countdown -->
                                    <div class="dial-swipe-panel">
                                        <div class="tide-center-label">Next Tide</div>
                                        <div class="next-tide-info">
                                            <div class="next-tide-type" id="next-tide-type">Low</div>
                                            <div class="next-tide-height" id="next-tide-height">--.- ft</div>
                                            <div class="next-tide-countdown" id="next-tide-countdown">in --h --m</div>
                                        </div>
                                    </div>

                                    <!-- View 1: Today's High/Low -->
                                    <div class="dial-swipe-panel active">
                                        <div class="tide-center-label">Future Tides</div>
                                        <div class="tide-center-values">
                                            <div class="tide-high-value">High: <span id="today-high">--.-</span>ft</div>
                                            <div class="tide-low-value">Low: <span id="today-low">--.-</span>ft</div>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                                <!-- Dial Swipe Indicators -->
                                <div class="dial-swipe-indicators">
                                    <span class="dial-indicator active" data-dial-index="0"></span>
                                    <span class="dial-indicator" data-dial-index="1"></span>
                                </div>
                            </div>
                            
                            <!-- BOTTOM: LOW label and time -->
                            <div class="tide-label-low">
                                <div class="tide-extreme-time" id="low-time-display">--:--</div>
                                <div class="tide-extreme-label">LOW</div>
                            </div>
                            
                        </div>
                    </div>
                </div>

                <!-- Right Side - Weather and Astronomy -->
                <div class="right-panels">
                    <!-- Top Grid - Weather Info Cards -->
                    <div class="info-grid">
                
                        <!-- Wind Card -->
                        <div class="info-card">
                            <h3>Wind Speed and Direction</h3>
                            <div class="wind-display">
                                <div class="wind-arrow" id="wind-arrow">‚Üë</div>
                                <div class="wind-speed" id="wind-speed">54 mph</div>
                            </div>
                        </div>

                        <!-- Weather Card -->
                        <div class="info-card">
                            <h3>Weather</h3>
                            <div class="weather-display">
                                <div class="weather-icon" id="weather-icon">‚òÅÔ∏è</div>
                                <div class="weather-temp" id="weather-temp">28¬∞F</div>
                            </div>
                        </div>

                        <!-- Visibility Card -->
                        <div class="info-card">
                            <h3>Visibility</h3>
                            <div class="visibility-display">
                                <svg class="visibility-droplet" viewBox="0 0 100 120" id="visibility-droplet">
                                    <defs>
                                        <!-- Define the simple droplet shape as a clip path -->
                                        <clipPath id="dropletClip">
                                            <!-- Triangle with rounded top -->
                                            <path d="M 50,110 L 20,30 Q 20,10 35,10 L 65,10 Q 80,10 80,30 Z" />
                                        </clipPath>
                                    </defs>
                                    
                                    <!-- Droplet outline (stroke only) -->
                                    <path class="droplet-outline" 
                                        d="M 50,110 L 20,30 Q 20,10 35,10 L 65,10 Q 80,10 80,30 Z" 
                                        fill="none" 
                                        stroke="currentColor" 
                                        stroke-width="3"/>
                                    
                                    <!-- Fill container (clipped to droplet shape) -->
                                    <g clip-path="url(#dropletClip)">
                                        <!-- Background (empty state) -->
                                        <rect x="0" y="0" width="100" height="120" fill="var(--color-border)" opacity="0.2"/>
                                        
                                        <!-- Fill level (animated) -->
                                        <rect id="visibility-fill" 
                                            x="0" 
                                            y="120" 
                                            width="100" 
                                            height="0" 
                                            fill="var(--color-turquoise)"/>
                                    </g>
                                </svg>
                                <div class="visibility-value" id="visibility">10 mi</div>
                            </div>
                        </div>
                    </div>

                    <!-- Astronomy Section -->
                    <div class="astronomy-section">
                
                        <!-- Moon -->
                        <div class="astro-card">
                            <img src="assets/New Moon.svg" alt="Moon Phase" class="moon-phase-icon" id="moon-phase">
                            <div class="astro-times">
                                <div class="astro-time">
                                    <span class="label">Moon Rise:</span>
                                    <span class="value" id="moon-rise">--:--</span>
                                </div>
                                <div class="astro-time">
                                    <span class="label">Moon Set:</span>
                                    <span class="value" id="moon-set">--:--</span>
                                </div>
                            </div>
                        </div>

                        <!-- Sun -->
                        <div class="astro-card">
                            <div class="sun-icon">‚òÄÔ∏è</div>
                            <div class="astro-times">
                                <div class="astro-time">
                                    <span class="label">Sunrise:</span>
                                    <span class="value" id="sunrise">--:--</span>
                                </div>
                                <div class="astro-time">
                                    <span class="label">Sunset:</span>
                                    <span class="value" id="sunset">--:--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Swipeable Tide Chart Section -->
            <div class="tide-chart-section">
                <div class="swipe-container" id="swipe-container">
                    
                    <!-- View 1: Today's Chart -->
                    <div class="swipe-panel active" id="chart-view">
                        <h3>Today's Tide Chart</h3>
                        <div class="chart-container">
                            <canvas id="tide-chart"></canvas>
                        </div>
                    </div>

                    <!-- View 2: 7-Day Table -->
                    <div class="swipe-panel" id="table-view">
                        <h3>7-Day Tide Table</h3>
                        <div class="tide-table" id="tide-table">
                            <!-- Table will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Swipe Indicators -->
                <div class="swipe-indicators">
                    <span class="indicator active" data-index="0"></span>
                    <span class="indicator" data-index="1"></span>
                </div>
            </div>

        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <span id="connection-status">üü¢ Connected</span>
            <span id="network-status">üì° Network OK</span>
            <span id="current-time">Loading...</span>
            <span id="last-update">Updated: Never</span>
        </footer>

    </div>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>